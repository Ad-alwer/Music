<template>
  <div class="container mt-5">
    <header class="d-flex justify-content-center">
      <svg
        width="131"
        height="25"
        viewBox="0 0 131 25"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        class="svg"
      >
        <path
          d="M47.84 20L47.818 10.76L43.286 18.372H41.68L37.17 10.958V20H33.826V4.6H36.774L42.538 14.17L48.214 4.6H51.14L51.184 20H47.84ZM66.3437 8.164L60.9977 20.726C60.4551 22.09 59.7804 23.0507 58.9737 23.608C58.1817 24.1653 57.2211 24.444 56.0917 24.444C55.4757 24.444 54.8671 24.3487 54.2657 24.158C53.6644 23.9673 53.1731 23.7033 52.7917 23.366L54.0457 20.924C54.3097 21.1587 54.6104 21.342 54.9477 21.474C55.2997 21.606 55.6444 21.672 55.9817 21.672C56.4511 21.672 56.8324 21.5547 57.1257 21.32C57.4191 21.1 57.6831 20.726 57.9177 20.198L57.9617 20.088L52.8357 8.164H56.3777L59.6997 16.194L63.0437 8.164H66.3437ZM75.7004 19.428C75.3631 19.6773 74.9451 19.868 74.4464 20C73.9624 20.1173 73.4491 20.176 72.9064 20.176C71.4984 20.176 70.4058 19.8167 69.6284 19.098C68.8658 18.3793 68.4844 17.3233 68.4844 15.93V11.068H66.6584V8.428H68.4844V5.546H71.9164V8.428H74.8644V11.068H71.9164V15.886C71.9164 16.3847 72.0411 16.7733 72.2904 17.052C72.5544 17.316 72.9211 17.448 73.3904 17.448C73.9331 17.448 74.3951 17.3013 74.7764 17.008L75.7004 19.428ZM82.8937 20.176C81.6471 20.176 80.5251 19.9193 79.5277 19.406C78.5451 18.878 77.7751 18.152 77.2177 17.228C76.6604 16.304 76.3817 15.2553 76.3817 14.082C76.3817 12.9087 76.6604 11.86 77.2177 10.936C77.7751 10.012 78.5451 9.29333 79.5277 8.78C80.5251 8.252 81.6471 7.988 82.8937 7.988C84.1404 7.988 85.2551 8.252 86.2377 8.78C87.2204 9.29333 87.9904 10.012 88.5477 10.936C89.1051 11.86 89.3837 12.9087 89.3837 14.082C89.3837 15.2553 89.1051 16.304 88.5477 17.228C87.9904 18.152 87.2204 18.878 86.2377 19.406C85.2551 19.9193 84.1404 20.176 82.8937 20.176ZM82.8937 17.36C83.7737 17.36 84.4924 17.0667 85.0497 16.48C85.6217 15.8787 85.9077 15.0793 85.9077 14.082C85.9077 13.0847 85.6217 12.2927 85.0497 11.706C84.4924 11.1047 83.7737 10.804 82.8937 10.804C82.0137 10.804 81.2877 11.1047 80.7157 11.706C80.1437 12.2927 79.8577 13.0847 79.8577 14.082C79.8577 15.0793 80.1437 15.8787 80.7157 16.48C81.2877 17.0667 82.0137 17.36 82.8937 17.36ZM98.8718 7.988C100.338 7.988 101.519 8.428 102.414 9.308C103.323 10.188 103.778 11.4933 103.778 13.224V20H100.346V13.752C100.346 12.8133 100.14 12.1167 99.7298 11.662C99.3191 11.1927 98.7251 10.958 97.9478 10.958C97.0824 10.958 96.3931 11.2293 95.8798 11.772C95.3664 12.3 95.1098 13.092 95.1098 14.148V20H91.6778V8.164H94.9558V9.55C95.4104 9.05133 95.9751 8.67 96.6498 8.406C97.3244 8.12733 98.0651 7.988 98.8718 7.988ZM118.612 14.126C118.612 14.17 118.59 14.478 118.546 15.05H109.592C109.753 15.7833 110.134 16.3627 110.736 16.788C111.337 17.2133 112.085 17.426 112.98 17.426C113.596 17.426 114.138 17.338 114.608 17.162C115.092 16.9713 115.539 16.678 115.95 16.282L117.776 18.262C116.661 19.538 115.033 20.176 112.892 20.176C111.557 20.176 110.376 19.9193 109.35 19.406C108.323 18.878 107.531 18.152 106.974 17.228C106.416 16.304 106.138 15.2553 106.138 14.082C106.138 12.9233 106.409 11.882 106.952 10.958C107.509 10.0193 108.264 9.29333 109.218 8.78C110.186 8.252 111.264 7.988 112.452 7.988C113.61 7.988 114.659 8.23733 115.598 8.736C116.536 9.23467 117.27 9.95333 117.798 10.892C118.34 11.816 118.612 12.894 118.612 14.126ZM112.474 10.584C111.696 10.584 111.044 10.804 110.516 11.244C109.988 11.684 109.665 12.2853 109.548 13.048H115.378C115.26 12.3 114.938 11.706 114.41 11.266C113.882 10.8113 113.236 10.584 112.474 10.584ZM124.879 20.176C123.896 20.176 122.935 20.0587 121.997 19.824C121.058 19.5747 120.31 19.2667 119.753 18.9L120.897 16.436C121.425 16.7733 122.063 17.052 122.811 17.272C123.559 17.4773 124.292 17.58 125.011 17.58C126.463 17.58 127.189 17.2207 127.189 16.502C127.189 16.1647 126.991 15.9227 126.595 15.776C126.199 15.6293 125.59 15.5047 124.769 15.402C123.801 15.2553 123.001 15.0867 122.371 14.896C121.74 14.7053 121.19 14.368 120.721 13.884C120.266 13.4 120.038 12.7107 120.038 11.816C120.038 11.068 120.251 10.408 120.677 9.836C121.117 9.24933 121.747 8.79467 122.569 8.472C123.405 8.14933 124.387 7.988 125.517 7.988C126.353 7.988 127.181 8.08333 128.003 8.274C128.839 8.45 129.528 8.69933 130.071 9.022L128.927 11.464C127.885 10.8773 126.749 10.584 125.517 10.584C124.783 10.584 124.233 10.6867 123.867 10.892C123.5 11.0973 123.317 11.3613 123.317 11.684C123.317 12.0507 123.515 12.3073 123.911 12.454C124.307 12.6007 124.937 12.74 125.803 12.872C126.771 13.0333 127.563 13.2093 128.179 13.4C128.795 13.576 129.33 13.906 129.785 14.39C130.239 14.874 130.467 15.5487 130.467 16.414C130.467 17.1473 130.247 17.8 129.807 18.372C129.367 18.944 128.721 19.3913 127.871 19.714C127.035 20.022 126.037 20.176 124.879 20.176Z"
          fill="#4343EF"
        />
        <rect width="24" height="24" rx="12" fill="#4343EF" />
        <path
          d="M17 6.44451V14.2176C17.0008 14.6642 16.8404 15.0982 16.5442 15.4507C16.248 15.8031 15.833 16.0538 15.3653 16.1628C14.8975 16.2717 14.4039 16.2328 13.9628 16.0521C13.5217 15.8714 13.1585 15.5594 12.931 15.1656C12.7035 14.7719 12.6246 14.319 12.707 13.8789C12.7895 13.4389 13.0284 13.037 13.3858 12.7372C13.7433 12.4373 14.1987 12.2568 14.6798 12.2242C15.1608 12.1916 15.6398 12.3088 16.0406 12.5573V9.23405L9.32476 10.7887V15.9943C9.32559 16.4409 9.16515 16.8749 8.86895 17.2274C8.57275 17.5798 8.15778 17.8305 7.69005 17.9395C7.22231 18.0485 6.72865 18.0095 6.28757 17.8288C5.84648 17.6482 5.4833 17.3361 5.25576 16.9423C5.02822 16.5486 4.94939 16.0957 5.03181 15.6556C5.11422 15.2156 5.35315 14.8137 5.7106 14.5139C6.06806 14.214 6.52351 14.0335 7.00454 14.0009C7.48557 13.9683 7.96456 14.0855 8.36535 14.334V8.22121C8.36537 8.12215 8.40117 8.02594 8.46705 7.94789C8.53293 7.86984 8.6251 7.81443 8.72891 7.79047L16.4041 6.01377C16.4748 5.99698 16.5486 5.99552 16.62 6.00952C16.6913 6.02351 16.7582 6.05257 16.8154 6.09444C16.8728 6.13601 16.9193 6.18913 16.9513 6.24978C16.9833 6.31043 16.9999 6.37702 17 6.44451Z"
          fill="white"
        />
      </svg>
    </header>
    <section class="d-flex justify-content-between gap-4 mt-5">
      <main class="main">
        <form v-show="!signupsaved">
          <div class="form-group">
            <input
              type="text"
              ref="usernameinput"
              @keyup.prevent="checkusername($event.target.value)"
              maxlength="38"
              class="form-control border border-secondary"
              v-model="inputsarr.username.inputValue"
              @focus="inputsarr.username.isFocused = true"
              @blur="inputsarr.username.isFocused = false"
            />
            <label
              :class="{
                focused:
                  inputsarr.username.isFocused || inputsarr.username.inputValue,
              }"
              >Username
            </label>
            <div class="mt-1 alert-div" v-show="verifyarr.username.show">
              <div
                class="pb-1 d-flex align-items-center gap-2 py-1 rounded-3 mx-2 ps-2"
                v-if="verifyarr.username.value"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="15px"
                  height="15px"
                  viewBox="0 0 1024 1024"
                >
                  <path
                    fill="#4db051"
                    d="M512 0C229.232 0 0 229.232 0 512c0 282.784 229.232 512 512 512c282.784 0 512-229.216 512-512C1024 229.232 794.784 0 512 0m0 961.008c-247.024 0-448-201.984-448-449.01c0-247.024 200.976-448 448-448s448 200.977 448 448s-200.976 449.01-448 449.01m204.336-636.352L415.935 626.944l-135.28-135.28c-12.496-12.496-32.752-12.496-45.264 0c-12.496 12.496-12.496 32.752 0 45.248l158.384 158.4c12.496 12.48 32.752 12.48 45.264 0c1.44-1.44 2.673-3.009 3.793-4.64l318.784-320.753c12.48-12.496 12.48-32.752 0-45.263c-12.512-12.496-32.768-12.496-45.28 0"
                  />
                </svg>
                <span class="alert-txt">You can use this username</span>
              </div>
              <div
                class="pb-1 d-flex align-items-center gap-2 py-1 rounded-3 mx-2 ps-2"
                v-else
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20px"
                  height="20px"
                  viewBox="0 0 24 24"
                >
                  <path
                    fill="#db0a0a"
                    d="M12 21a9 9 0 1 1 9-9a9 9 0 0 1-9 9m0-16.5a7.5 7.5 0 1 0 7.5 7.5A7.5 7.5 0 0 0 12 4.5"
                  />
                  <path
                    fill="#db0a0a"
                    d="M12 13a.76.76 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5A.76.76 0 0 1 12 13m0 3a.76.76 0 0 1-.75-.75v-.5a.75.75 0 0 1 1.5 0v.5A.76.76 0 0 1 12 16"
                  />
                </svg>

                <span class="alert-txt">You can't use this username</span>
              </div>
            </div>
          </div>
          <div class="form-group">
            <input
              type="mail"
              ref="emailinput"
              @keyup="checkmail($event.target.value)"
              maxlength="38"
              class="form-control border border-secondary"
              v-model="inputsarr.email.inputValue"
              @focus="inputsarr.email.isFocused = true"
              @blur="inputsarr.email.isFocused = false"
            />
            <label
              :class="{
                focused:
                  inputsarr.email.isFocused || inputsarr.email.inputValue,
              }"
              >Email
            </label>
            <div class="mt-1 alert-div" v-show="verifyarr.email.show">
              <div
                v-if="verifyarr.email.value"
                class="pb-1 d-flex align-items-center gap-2 py-1 rounded-3 mx-2 ps-2"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="15px"
                  height="15px"
                  viewBox="0 0 1024 1024"
                >
                  <path
                    fill="#4db051"
                    d="M512 0C229.232 0 0 229.232 0 512c0 282.784 229.232 512 512 512c282.784 0 512-229.216 512-512C1024 229.232 794.784 0 512 0m0 961.008c-247.024 0-448-201.984-448-449.01c0-247.024 200.976-448 448-448s448 200.977 448 448s-200.976 449.01-448 449.01m204.336-636.352L415.935 626.944l-135.28-135.28c-12.496-12.496-32.752-12.496-45.264 0c-12.496 12.496-12.496 32.752 0 45.248l158.384 158.4c12.496 12.48 32.752 12.48 45.264 0c1.44-1.44 2.673-3.009 3.793-4.64l318.784-320.753c12.48-12.496 12.48-32.752 0-45.263c-12.512-12.496-32.768-12.496-45.28 0"
                  />
                </svg>
                <span class="alert-txt">You can use this email</span>
              </div>
              <div
                v-else
                class="pb-1 d-flex align-items-center gap-2 py-1 rounded-3 mx-2 ps-2"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20px"
                  height="20px"
                  viewBox="0 0 24 24"
                >
                  <path
                    fill="#db0a0a"
                    d="M12 21a9 9 0 1 1 9-9a9 9 0 0 1-9 9m0-16.5a7.5 7.5 0 1 0 7.5 7.5A7.5 7.5 0 0 0 12 4.5"
                  />
                  <path
                    fill="#db0a0a"
                    d="M12 13a.76.76 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5A.76.76 0 0 1 12 13m0 3a.76.76 0 0 1-.75-.75v-.5a.75.75 0 0 1 1.5 0v.5A.76.76 0 0 1 12 16"
                  />
                </svg>

                <span class="alert-txt">You can't use this email</span>
              </div>
            </div>
          </div>
          <div class="form-group position-relative">
            <div class="d-flex">
              <input
                @keyup.prevent="checkpassword($event.target.value)"
                ref="passwordinput"
                :type="eyeshow.password ? 'text' : 'password'"
                maxlength="38"
                class="form-control border border-secondary"
                v-model="inputsarr.password.inputValue"
                @focus="inputsarr.password.isFocused = true"
                @blur="inputsarr.password.isFocused = false"
              />
              <svg
                v-if="eyeshow.password"
                class="svg-eye mt-2"
                xmlns="http://www.w3.org/2000/svg"
                width="20px"
                height="20px"
                viewBox="0 0 24 24"
                @click="eyeshow.password = false"
              >
                <path
                  fill="currentColor"
                  d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0"
                />
              </svg>
              <svg
                class="svg-eye mt-2"
                v-else
                xmlns="http://www.w3.org/2000/svg"
                width="20px"
                height="20px"
                viewBox="0 0 24 24"
                @click="eyeshow.password = true"
              >
                <path
                  fill="currentColor"
                  d="M2 5.27L3.28 4L20 20.72L18.73 22l-3.08-3.08c-1.15.38-2.37.58-3.65.58c-5 0-9.27-3.11-11-7.5c.69-1.76 1.79-3.31 3.19-4.54zM12 9a3 3 0 0 1 3 3a3 3 0 0 1-.17 1L11 9.17A3 3 0 0 1 12 9m0-4.5c5 0 9.27 3.11 11 7.5a11.79 11.79 0 0 1-4 5.19l-1.42-1.43A9.862 9.862 0 0 0 20.82 12A9.821 9.821 0 0 0 12 6.5c-1.09 0-2.16.18-3.16.5L7.3 5.47c1.44-.62 3.03-.97 4.7-.97M3.18 12A9.821 9.821 0 0 0 12 17.5c.69 0 1.37-.07 2-.21L11.72 15A3.064 3.064 0 0 1 9 12.28L5.6 8.87c-.99.85-1.82 1.91-2.42 3.13"
                />
              </svg>
            </div>
            <label
              :class="{
                focused:
                  inputsarr.password.isFocused || inputsarr.password.inputValue,
              }"
              >Password
            </label>
            <div class="mt-1 alert-div" v-show="verifyarr.password.show">
              <div
                v-if="verifyarr.password.value"
                class="pb-1 d-flex align-items-center gap-2 py-1 rounded-3 mx-2 ps-2"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="15px"
                  height="15px"
                  viewBox="0 0 1024 1024"
                >
                  <path
                    fill="#4db051"
                    d="M512 0C229.232 0 0 229.232 0 512c0 282.784 229.232 512 512 512c282.784 0 512-229.216 512-512C1024 229.232 794.784 0 512 0m0 961.008c-247.024 0-448-201.984-448-449.01c0-247.024 200.976-448 448-448s448 200.977 448 448s-200.976 449.01-448 449.01m204.336-636.352L415.935 626.944l-135.28-135.28c-12.496-12.496-32.752-12.496-45.264 0c-12.496 12.496-12.496 32.752 0 45.248l158.384 158.4c12.496 12.48 32.752 12.48 45.264 0c1.44-1.44 2.673-3.009 3.793-4.64l318.784-320.753c12.48-12.496 12.48-32.752 0-45.263c-12.512-12.496-32.768-12.496-45.28 0"
                  />
                </svg>
                <span class="alert-txt">You can use this password</span>
              </div>
              <div
                v-else
                class="pb-1 d-flex align-items-center gap-2 py-1 rounded-3 mx-2 ps-2"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20px"
                  height="20px"
                  viewBox="0 0 24 24"
                >
                  <path
                    fill="#db0a0a"
                    d="M12 21a9 9 0 1 1 9-9a9 9 0 0 1-9 9m0-16.5a7.5 7.5 0 1 0 7.5 7.5A7.5 7.5 0 0 0 12 4.5"
                  />
                  <path
                    fill="#db0a0a"
                    d="M12 13a.76.76 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5A.76.76 0 0 1 12 13m0 3a.76.76 0 0 1-.75-.75v-.5a.75.75 0 0 1 1.5 0v.5A.76.76 0 0 1 12 16"
                  />
                </svg>

                <span class="alert-txt">You can't use this password</span>
              </div>
            </div>
          </div>
          <div class="form-group">
            <div class="d-flex">
              <input
                :type="eyeshow.passwordagain ? 'text' : 'password'"
                maxlength="38"
                @keyup="checkpasswordagain($event.target.value)"
                class="form-control border border-secondary"
                v-model="inputsarr.passwordagain.inputValue"
                @focus="inputsarr.passwordagain.isFocused = true"
                @blur="inputsarr.passwordagain.isFocused = false"
                ref="passwordagaininput"
              />
              <svg
                v-if="eyeshow.passwordagain"
                class="svg-eye mt-2"
                xmlns="http://www.w3.org/2000/svg"
                width="20px"
                height="20px"
                viewBox="0 0 24 24"
                @click="eyeshow.passwordagain = false"
              >
                <path
                  fill="currentColor"
                  d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0"
                />
              </svg>
              <svg
                class="svg-eye mt-2"
                v-else
                xmlns="http://www.w3.org/2000/svg"
                width="20px"
                height="20px"
                viewBox="0 0 24 24"
                @click="eyeshow.passwordagain = true"
              >
                <path
                  fill="currentColor"
                  d="M2 5.27L3.28 4L20 20.72L18.73 22l-3.08-3.08c-1.15.38-2.37.58-3.65.58c-5 0-9.27-3.11-11-7.5c.69-1.76 1.79-3.31 3.19-4.54zM12 9a3 3 0 0 1 3 3a3 3 0 0 1-.17 1L11 9.17A3 3 0 0 1 12 9m0-4.5c5 0 9.27 3.11 11 7.5a11.79 11.79 0 0 1-4 5.19l-1.42-1.43A9.862 9.862 0 0 0 20.82 12A9.821 9.821 0 0 0 12 6.5c-1.09 0-2.16.18-3.16.5L7.3 5.47c1.44-.62 3.03-.97 4.7-.97M3.18 12A9.821 9.821 0 0 0 12 17.5c.69 0 1.37-.07 2-.21L11.72 15A3.064 3.064 0 0 1 9 12.28L5.6 8.87c-.99.85-1.82 1.91-2.42 3.13"
                />
              </svg>
            </div>
            <label
              :class="{
                focused:
                  inputsarr.passwordagain.isFocused ||
                  inputsarr.passwordagain.inputValue,
              }"
              >Repeat Password
            </label>
            <div
              class="mt-1 alert-div"
              v-show="
                verifyarr.passwordagain.show && !verifyarr.passwordagain.value
              "
            >
              <div
                class="pb-1 d-flex align-items-center gap-2 py-1 rounded-3 mx-2 ps-2"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="20px"
                  height="20px"
                  viewBox="0 0 24 24"
                >
                  <path
                    fill="#db0a0a"
                    d="M12 21a9 9 0 1 1 9-9a9 9 0 0 1-9 9m0-16.5a7.5 7.5 0 1 0 7.5 7.5A7.5 7.5 0 0 0 12 4.5"
                  />
                  <path
                    fill="#db0a0a"
                    d="M12 13a.76.76 0 0 1-.75-.75v-3.5a.75.75 0 0 1 1.5 0v3.5A.76.76 0 0 1 12 13m0 3a.76.76 0 0 1-.75-.75v-.5a.75.75 0 0 1 1.5 0v.5A.76.76 0 0 1 12 16"
                  />
                </svg>

                <span class="alert-txt">Passwords aren't the same</span>
              </div>
            </div>
          </div>
          <div class="d-flex justify-content-evenly mt-4">
            <button class="btn px-3 py-2 signup-btn" @click.prevent="signup()">
              Sign up
            </button>
            <button
              @click.prevent="login"
              class="btn rounded-0 px-3 py-2 login-btn"
            >
              I have an account
            </button>
          </div>
        </form>
        <div v-show="signupsaved" class="div-verify">
          <P class="text-center fs-5 fw-bold"
            >Verify lind send to your email you should verify your account with
            it.</P
          >
          <p class="text-center">Email : {{ useremail }}</p>
          <div class="d-flex justify-content-center">
            <button @click="changemail" class="btn btn-changemail px-3 py-2">
              Change email
            </button>
          </div>
        </div>
        <loader v-if="loader" />
      </main>
      <aside class="aside">
        <img
          src="../assets/img/AdobeStock-xm3SRQniUf.jpg"
          class="img-fluid"
          alt=""
        />
      </aside>
    </section>
  </div>
</template>

<script>
import axios from "axios";
import loader from "./loader.vue";

export default {
  name: "register",
  beforeMount() {
    if (this.getcookies("jwt")) {
      this.removecookies(150, this.getcookies("jwt"));
    }
  },
  data() {
    return {
      inputsarr: {
        username: {
          inputValue: "",
          isFocused: false,
        },
        email: {
          inputValue: "",
          isFocused: false,
        },
        password: {
          inputValue: "",
          isFocused: false,
        },
        passwordagain: {
          inputValue: "",
          isFocused: false,
        },
      },
      verifyarr: {
        username: { show: false, value: false },
        email: { show: false, value: false },
        password: { show: false, value: false },
        passwordagain: { show: false, value: false },
      },
      eyeshow: {
        password: false,
        passwordagain: false,
      },
      apiaddress: process.env.VUE_APP_Api_ADDRESS,
      loader: false,
      useremail: null,
      signupsaved: false,
    };
  },
  methods: {
    login: function () {
      location.href = "/login";
    },
    setcookies: function (expireday, value) {
      let now;
      if (expireday == "session") {
        now = "session";
      } else {
        now = new Date();

        now.setTime(now.getTime() + expireday * 24 * 60 * 60 * 1000);
      }

      document.cookie = `jwt=${value};path=/;expires=${now}`;
    },
    getcookies: function (cookiename) {
      let cookiesArray = document.cookie.split(";");

      let mainCookie = null;

      cookiesArray.some((cookie) => {
        if (cookie.includes(cookiename)) {
          mainCookie = cookie.substring(cookie.indexOf("=") + 1);
          return true;
        }
      });

      return mainCookie;
    },
    removecookies: function (expireday, value) {
      const now = new Date();

      now.setTime(now.getTime() - expireday * 24 * 60 * 60 * 1000);

      document.cookie = `jwt=${value};path=/;expires=${now}`;
    },
    checkusername: function (e) {
      const regexusername =
        /^(?=.{4,12}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9._]+(?<![_.])$/;
      if (regexusername.test(e)) {
        axios
          .get(`${this.apiaddress}accountpending/checkusername/${e}`)
          .then((res) => {
            if (res.data.status) {
              this.verifyarr.username.show = true;
              this.verifyarr.username.value = true;
            } else {
              this.verifyarr.username.show = true;
              this.verifyarr.username.value = false;
            }
          });
      } else {
        this.verifyarr.username.show = true;
        this.verifyarr.username.value = false;
      }
    },
    checkmail: function (e) {
      const regexmail = /^[a-zA-Z0-9._%+-]+@gmail\.com$/;
      if (regexmail.test(e)) {
        axios
          .get(`${this.apiaddress}accountpending/checkmail/${e}`)
          .then((res) => {
            if (res.data.status) {
              this.verifyarr.email.show = true;
              this.verifyarr.email.value = true;
            } else {
              this.verifyarr.email.show = true;
              this.verifyarr.email.value = false;
            }
          });
      } else {
        this.verifyarr.email.show = true;
        this.verifyarr.email.value = false;
      }
    },
    checkpassword: function (e) {
      const passwordregex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
      if (passwordregex.test(e)) {
        this.verifyarr.password.show = true;
        this.verifyarr.password.value = true;
      } else {
        this.verifyarr.password.show = true;
        this.verifyarr.password.value = false;
      }
      this.$refs.passwordagaininput.value
        ? this.checkpasswordagain(this.$refs.passwordagaininput.value)
        : null;
    },
    checkpasswordagain: function (e) {
      if (e == this.$refs.passwordinput.value) {
        this.verifyarr.passwordagain.show = true;
        this.verifyarr.passwordagain.value = true;
      } else {
        this.verifyarr.passwordagain.show = true;
        this.verifyarr.passwordagain.value = false;
      }
    },
    signup: function () {
      if (
        this.verifyarr.username.value &&
        this.verifyarr.password.value &&
        this.verifyarr.passwordagain.value &&
        this.verifyarr.email.value
      ) {
        this.loader = true;
        axios
          .post(`${this.apiaddress}accountpending/register`, {
            username: this.$refs.usernameinput.value.toLowerCase(),
            email: this.$refs.emailinput.value.toLowerCase(),
            password: this.$refs.passwordinput.value,
          })
          .then((res) => {
            if (res.data) {
              this.useremail = this.$refs.emailinput.value;
              this.loader = false;
              this.signupsaved = true;
            }
          });
      }
    },
    changemail: function () {
      this.signupsaved = false;
      this.$refs.passwordinput.value = "";
      this.$refs.passwordagaininput.value = "";
      this.verifyarr.passwordagain.show = false;
    },
  },
  components: {
    loader,
  },
};
</script>

<style scoped>
.svg {
  scale: 2;
  z-index: 999;
}
.form-group {
  position: relative;
  margin-bottom: 12px;
  margin-top: 20px !important;
}

label {
  position: absolute;
  top: 3px;
  left: 0;
  transition: transform 0.3s ease;
  pointer-events: none;
  padding: 6px;
  font-size: 12px;
  color: #999;
}

.focused,
.form-control:focus + label {
  transform: translateY(-20px);
  margin-left: 5px;
  font-size: 10px;
  color: #333;
  background-color: white;
}

.form-control:focus {
  outline: none;
  box-shadow: none;
}
img {
  height: 650px;
  position: relative;
  top: -80px;
  right: -40px;
}
form {
  margin-top: 20%;
  scale: 1.1;
  position: relative;
  left: 3%;
}
input.form-control {
  width: 450px;
}
.signup-btn {
  background-color: #4343ef;
  color: white;
}
.login-btn {
  border-bottom: 2px solid #4343ef;
}
.alert-txt {
  font-size: 11px;
}
.alert-div div {
  background-color: #e5e7eb;
}
.svg-eye {
  margin-left: -30px;
  cursor: pointer;
}
.btn-changemail {
  background-color: #4343ef;
  color: white;
  width: 80%;
}
.div-verify {
  margin-top: 20%;
}

@media screen and (max-width: 767px) {
  .aside {
    display: none;
  }
  .main {
    display: flex;
    justify-content: center;
    margin: 0 auto !important;
  }
  input.form-control {
  width: 380px;
}

  form {
    left: 0;
  }
  .container {
    padding: 0 0 !important;
    margin: 0 0 0 0 !important;
  }
}
</style>
